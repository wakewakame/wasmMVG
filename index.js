const main = () => {
	const cam1 = { w: 640, h: 480, focal: (640 + 480) / 2, ppx: 320, ppy: 240, k1: 0, k2: 0, k3: 0 };
	const cam2 = { w: 640, h: 480, focal: (640 + 480) / 2, ppx: 320, ppy: 240, k1: 0, k2: 0, k3: 0 };
	const points1 = [[272.2334232437002,192.143096047645],[395.3232388163693,191.53138258267128],[388.98809334475254,309.0432811398034],[271.4780866195531,315.25457693588874],[257.82063138502207,177.77089030529157],[360.08265253593595,177.834210382239],[356.1455523860949,276.21390407923707],[257.76572948097663,280.046194181676],[355.83527015877263,189.54084105450235],[373.23095260484087,202.21884211495805],[357.63682982331846,202.65867103861936],[283.0135567387404,237.2502240423625],[303.15772327402425,232.18930432427308],[324.25079157726555,226.67106096872945],[352.3071627408355,281.4910593685039],[348.4166466527449,209.34966350967878]];
	const points2 = [[242.39730709658917,192.53403808665092],[362.6696861209096,198.9423505890685],[361.18348618782335,320.2082350463391],[247.82705286702193,306.92567676025675],[285.8374981107267,173.46571077520872],[387.20787890605015,177.6784105667545],[384.7398996430027,279.59838886716966],[288.32745974271194,270.4759695244186],[361.23910515788566,191.39690500858995],[369.19390713840124,206.4790567514765],[370.7549549327696,204.5510955253992],[278.51312931453595,234.22165644718055],[301.0154198336564,230.90933823811238],[346.1113291932367,225.80633686654699],[364.9754193922665,284.99706848001097],[360.8212285297388,210.81137277677058]];
	const result = Module.getRelativePose(cam1, points1, cam2, points2);
	console.log(result);
};

document.addEventListener("DOMContentLoaded", () => {
	window.Module = {
		// wasm の読み込みが完了したときのコールバック
		onRuntimeInitialized: () => { main(); },
		// main 関数の自動実行を無効化
		noInitialRun: true
	};

	// wasm 読み込み
	const scriptElem = document.createElement("script");
	scriptElem.src = "./build/wasm/RELEASE/main.js";
	document.body.appendChild(scriptElem);
});
